# 操作系统之进程篇

# 进程定义和概念

​	对于进程的定义，从不同的角度出发会有不同的定义，其中比较典型的是：**进程是系统进行资源分配和调度的一个独立单位。**

​	进程的概念与程序是离不开的。在单道程序环境中，程序在处理器中是顺序执行的，只有当程序执行完才会执行下一个程序，这种模式在现如今要求高性能高并发的环境下显然已经是过时的。而在多道程序环境中，程序在并发执行时会有失去封闭性和不可再现的问题，程序的概念已经不适用于多程序并发执行的情况[^注1.1]。由此就引入了“进程”的概念。

​	进程其实就是程序的另一种表达，或者说进程是在多道程序环境（并发环境）下的程序。与进程息息相关的是**进程控制块（Process Control Block，PCB）[^注1.2]**。PCB目的就是为了使程序能够成为在多道程序环境下独立运行的最小单位，成为与其他进程并发执行的进程。

​	进程有程序段、数据段和PCB组成。程序段和数据段是原本存在的，所以说创建进程实质上就是创建PCB，撤销进程实质上就是撤销PCB。

​	有了上述的概念和定义，我们可以简单地用表达式描述进程与程序的关系：**进程 = 程序 + PCB**；



[^注1.1]: 程序只是一组有序指令的集合，并存在某种介质上，其本身并不具备有活动的含义，因而是静态的。可以理解为只是一段代码。在并发环境下，会有间断执行的情况，程序这种静态概念是无法保存现场信息的。
[^注1.2]: PCB对于进程来说是很重要的，在后面篇章会详细介绍

# 进程的特性

​	进程虽然与程序的概念相仿，但就特性而言，它们可以说是截然不同的。

## 动态性

​	动态性是进程最基本的特性。主要表现在：“它由创建而生，由调度而执行，由撤销而消亡”。可见，进程有一定的生命期，而程序就只是一组有序指令的集合。

## 并发性

​	并发性是指多个进程能够同时存于内存中，并且能在一段时间内同时运行。引入进程的目的也正是为了使程序能够与其他程序并发执行。而没有创建PCB的程序是不能作为一个独立的单位参与运行的。

## 独立性

​	在传统的OS中，独立性是指进程是一个能独立运行、独立获得资源和独立接受调度的基本单位。

## 异步性

​	异步性是指进程是按异步方式运行的，即按各自独立的、不可预知的速度向前推进（不是很懂这里的异步，我对此的理解是相对于同步的）。

# 进程的状态

​	进程的基本状态主要有三种：**执行、就绪和阻塞**。为满足进程控制块对数据及操作的完整性要求以及增强管理的灵活性，引入了另外两种状态：**创建和终止**。

- **执行**：指进程已获得CPU，程序正在执行的状态。
- 就绪：指进程已获得除了CPU以外所有运行时必要资源，处于一种准备好运行的状态。处于就绪状态的进程可能会有多个，所以系统通常会以某种策略（如优先级策略）将它们排成一个队列，该队列为“就绪队列”。
- **阻塞**：指正在执行的进程由于发生某些事件（如IO请求，申请缓冲区失败等）暂时无法继续执行时的状态。该状态的进程也会排成一个队列，称为“阻塞队列”。
- **创建**：指进程正在对PCB进行初始化工作及正在获取运行时必要资源（除CPU）时的状态。只要初始化工作和资源获取成功后，就可由创建状态转入就绪状态。引入该状态的目的是确保进程控制块的完整性。操作系统也可以根据系统性能或主存容量的限制推迟进程的创建。
- **终止**：指进程执行完成或被终止时所处的状态。处于终止状态的进程，其PCB可以供其他进程收集利用，一旦无作用后，系统会将该PCB清零，回收其空间。

**状态的转换图：**

![进程状态间的转换图](C:\Users\Administrator\Desktop\学习\操作系统\OS-learn\img\进程状态间的转换图.png)

上图中的 “IO请求” 和 “IO完成” 只是引起阻塞事件的例子，并不是只有IO才能引起阻塞。

## 挂起与激活